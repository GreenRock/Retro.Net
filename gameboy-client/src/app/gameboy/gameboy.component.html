<main class="gb-masthead">
  <div class="container">
    <gb-lcd [maxScale]="1.25"></gb-lcd>
  </div>
</main>

<div class="container">
  <ngb-alert *ngFor="let errorMessage of errorMessages" type="danger" (close)="closeErrorMessageAlert(errorMessage)">{{errorMessage}}</ngb-alert>
</div>

<div *ngIf="!healthy" class="container">
  <div class="alert alert-danger">Waiting for server connection</div>
</div>

<div *ngIf="healthy" class="container">
  <form *ngIf="!displayNameSet" #form="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="form-display-name">Display name</label>
      <input type="text"
             class="form-control"
             id="form-display-name"
             placeholder="What shall we call you?"
             required minlength="2" maxLength="20" pattern="[\w\s-]+"
             [(ngModel)]="displayName" #nameField="ngModel" name="displayName">
      <div *ngIf="nameField.invalid && (nameField.dirty || nameField.touched); else displayNameHelp" class="ng-invalid-feedback">
        <div *ngIf="nameField.errors.required">Display name is required.</div>
        <div *ngIf="nameField.errors.minlength">Display name must be at least 2 characters long.</div>
        <div *ngIf="nameField.errors.maxLength">Display name cannot be longer than 20 characters.</div>
        <div *ngIf="nameField.errors.pattern">Display name can only contain letters, numbers, hyphens and underscores.</div>
      </div>
      <ng-template #displayNameHelp>
        <small id="display-name-help" class="form-text text-muted">
          This is simply used to identify your control inputs.
        </small>
      </ng-template>
    </div>
    <div class="form-group">
      <button type="submit" class="btn btn-primary">Submit</button>
    </div>
  </form>

  <div *ngIf="displayNameSet" class="row justify-content-md-center text-center">
    <div class="col col-lg-2">
      <svg width="150" height="150">
        <defs>
          <linearGradient id="control_gradient_border" x1="25%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#595A5C"/>
            <stop offset="15%" stop-color="#373838"/>
            <stop offset="27%" stop-color="#262626"/>
          </linearGradient>
          <linearGradient id="control_gradient_main" x1="25%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#231F20"/>
            <stop offset="1" stop-color="#424143"/>
          </linearGradient>
          <linearGradient id="control_gradient_centre" x1="25%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#231F20"/>
            <stop offset="1" stop-color="#333333"/>
          </linearGradient>
          <linearGradient id="control_gradient_dark" x1="25%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#0D0D0D"/>
            <stop offset="1" stop-color="#212121"/>
          </linearGradient>
        </defs>
        <g>
          <path fill="url(#control_gradient_border)" d="m127.46882,53.57712l-30.522,0l0,-32.522c0,-3.042 -2.467,-5.509 -5.509,-5.509l-30.646,0c-3.042,0 -5.508,2.467 -5.508,5.509l0,32.522l-32.522,0c-3.042,0 -5.509,2.467 -5.509,5.509l0,30.646c0,3.042 2.466,5.51 5.509,5.51l32.522,0l0,33.521c0,3.043 2.467,5.51 5.508,5.51l30.647,0c3.042,0 5.509,-2.467 5.509,-5.51l0,-33.521l30.522,0c3.042,0 5.509,-2.468 5.509,-5.51l0,-30.646c-0.001,-3.042 -2.467,-5.509 -5.51,-5.509z"/>
          <path fill="url(#control_gradient_main)" d="m124.07982,57.81012l-31.465,0l0,-33.068c0,-2.438 -1.978,-4.416 -4.416,-4.416l-24.565,0c-2.438,0 -4.415,1.978 -4.415,4.416l0,33.068l-33.068,0c-2.439,0 -4.416,1.978 -4.416,4.416l0,24.563c0,2.438 1.977,4.417 4.416,4.417l33.068,0l0,33.869c0,2.438 1.977,4.416 4.415,4.416l24.565,0c2.438,0 4.416,-1.978 4.416,-4.416l0,-33.869l31.465,0c2.438,0 4.416,-1.979 4.416,-4.417l0,-24.563c-0.001,-2.438 -1.978,-4.416 -4.416,-4.416z"/>
          <circle fill="url(#control_gradient_centre)" cx="75" cy="75" r="15" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="25" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="37" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="49" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="93" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="105" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="8" height="26" x="117" y="61" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="92" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="104" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="116" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="25" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="37" rx="3" ry="3" />
          <rect fill="url(#control_gradient_dark)" width="26" height="8" x="63" y="49" rx="3" ry="3" />
          <rect (click)="pressRight()" x="92" y="56" width="40" height="38" opacity="0" />
          <rect (click)="pressLeft()" x="18" y="56" width="40" height="38" opacity="0" />
          <rect (click)="pressUp()" x="57" y="18" width="38" height="40" opacity="0" />
          <rect (click)="pressDown()" x="57" y="92" width="38" height="40" opacity="0" />
        </g>
      </svg>
    </div>

    <div class="col-md-auto">
      <svg width="160" height="75">
        <defs>
          <linearGradient id="start_select_gradient_borders" x1="40%" y1="20%" x2="60%" y2="80%">
            <stop offset="0" stop-color="#C4C4C4"/>
            <stop offset="1" stop-color="#E0E0E0"/>
          </linearGradient>
        </defs>
        <g>
          <polygon fill="#39509C" points="61.694000244140625,49.94935607910156 61.694000244140625,49.94734191894531 61.694000244140625,49.94734191894531 "/>
          <polygon fill="#39509C" points="51.1829833984375,55.29034423828125 51.1829833984375,55.2913818359375 51.1829833984375,55.29034423828125 "/>
          <polygon fill="#39509C" points="40.42498779296875,60.764373779296875 40.42498779296875,60.762359619140625 40.42498779296875,60.762359619140625 "/>
          <polygon fill="#39509C" points="29.9169921875,66.10739135742188 29.9169921875,66.10641479492188 29.9169921875,66.10641479492188 "/>
          <path fill="#39509C" d="m25.641,64.40036l-0.351,-0.478l0.034,-0.015c-0.138,-0.106 -0.268,-0.128 -0.36,-0.13c-0.095,0 -0.311,0.031 -0.72,0.239l-6.173,3.139l-0.79,-1.551l7.129,-3.643l-0.437,-0.859l-7.043,3.581c-0.414,0.21 -0.565,0.367 -0.619,0.443c-0.039,0.055 -0.162,0.229 -0.045,0.638l1.081,2.122l0.435,0.435l-0.13,0.076c0.16,0.15 0.313,0.178 0.417,0.18l0,0c0.096,0 0.31,-0.031 0.72,-0.239l6.172,-3.14l0.789,1.553l-7.127,3.643l0.437,0.858l7.042,-3.581c0.416,-0.212 0.566,-0.367 0.618,-0.441c0.069,-0.098 0.15,-0.272 0.045,-0.64l-1.124,-2.19z"/>
          <path fill="#39509C" d="m30.648,65.36036l7.048,-3.584l-0.44,-0.866l-7.135,3.629l-0.862,-1.697l7.134,-3.628l-0.482,-0.947l-7.134,3.628l-0.864,-1.695l7.135,-3.629l-0.444,-0.874l-7.048,3.585c-0.415,0.211 -0.566,0.368 -0.619,0.443c-0.038,0.053 -0.15,0.211 -0.056,0.597l0.926,1.822l-0.006,0.004l1.612,3.154c0.256,0.306 0.441,0.306 0.504,0.306l0,0.499l0,0l0.002,-0.499c0.093,-0.001 0.305,-0.033 0.729,-0.248z"/>
          <path fill="#39509C" d="m41.139,60.02536l7.03,-3.574l-0.444,-0.874l-7.115,3.618l-1.86,-3.641l0.007,-0.003l-0.794,-1.561l-0.868,0.446l1.232,2.422l-0.008,0.003l1.583,3.096c0.256,0.305 0.448,0.306 0.513,0.307l0.01,0.498l0,0l0,-0.498c0.091,0 0.304,-0.031 0.714,-0.239z"/>
          <path fill="#39509C" d="m51.187,54.79136c0.096,0 0.307,-0.032 0.729,-0.246l7.048,-3.584l-0.44,-0.866l-7.135,3.629l-0.862,-1.697l7.134,-3.628l-0.481,-0.946l-7.134,3.627l-0.864,-1.696l7.135,-3.628l-0.444,-0.874l-7.048,3.584c-0.415,0.211 -0.565,0.368 -0.618,0.443c-0.041,0.057 -0.16,0.224 -0.043,0.642l0.955,1.857l-0.007,0.003l1.596,3.123c0.217,0.258 0.412,0.258 0.477,0.258l0,0.499l0,0l0.002,-0.5z"/>
          <path fill="#39509C" d="m62.409,49.20936l7.047,-3.584l-0.448,-0.88l-7.131,3.635l-1.841,-3.606l0.006,-0.003l-0.368,-0.724l6.268,-3.188l0.004,0.008l0.867,-0.44l-0.448,-0.882l-7.048,3.585c-0.414,0.21 -0.565,0.367 -0.619,0.443c-0.04,0.056 -0.16,0.223 -0.043,0.641l0.888,1.728l-0.005,0.004l0.796,1.566l0.861,1.678c0.216,0.257 0.423,0.259 0.491,0.26l0.008,0.498l0,0l0,-0.498c0.089,-0.001 0.302,-0.032 0.715,-0.241z"/>
          <polygon fill="#39509C" points="76.44699096679688,34.41938781738281 68.44998168945312,38.49537658691406 68.87600708007812,39.34034729003906 72.46099853515625,37.51734924316406 75.1199951171875,42.74537658691406 75.95098876953125,42.32234191894531 73.29299926757812,37.09437561035156 76.87899780273438,35.27040100097656 "/>
          <path fill="#39509C" d="m108.856,61.81236l-0.311,-0.421l0.046,-0.026c-0.156,-0.146 -0.31,-0.173 -0.413,-0.175c-0.094,0 -0.31,0.031 -0.72,0.239l-6.172,3.14l-0.79,-1.553l7.127,-3.642l-0.437,-0.86l-7.043,3.581c-0.415,0.211 -0.566,0.368 -0.619,0.443c-0.068,0.097 -0.149,0.271 -0.045,0.639l1.079,2.119l0.414,0.4l-0.131,0.089c0.168,0.172 0.332,0.202 0.439,0.204l0.001,0c0.095,0 0.308,-0.031 0.721,-0.24l6.171,-3.138l0.79,1.551l-7.128,3.644l0.437,0.858l7.043,-3.581c0.416,-0.212 0.565,-0.368 0.618,-0.442c0.04,-0.056 0.162,-0.229 0.046,-0.64l-1.123,-2.189z"/>
          <polygon fill="#39509C" points="118.38899230957031,52.81935119628906 110.39199829101562,56.895416259765625 110.81900024414062,57.740386962890625 114.40298461914062,55.9183349609375 117.06098937988281,61.145416259765625 117.89302062988281,60.722381591796875 115.2340087890625,55.494415283203125 118.82197570800781,53.67140197753906 "/>
          <path fill="#39509C" d="m128.053,47.92036l-0.11,0.067l-5.562,2.829c-0.97,0.493 -0.903,1.042 -0.688,1.561l2.592,5.096l0.82,-0.417l-0.635,-1.249l6.365,-3.236l0.635,1.248l0.832,-0.423l-2.536,-4.987c-0.512,-0.571 -1.05,-0.723 -1.713,-0.489zm-4.235,6.606l-1.141,-2.24l6.366,-3.237l1.141,2.24l-6.366,3.237z" id="svg_29"/>
          <path fill="#39509C" d="m142.97,45.61636l-0.284,-0.953c-0.122,0.047 -0.182,0.146 -0.191,0.187c0.002,-0.005 0.025,-0.114 -0.037,-0.471l-1.182,-2.324c-0.182,-0.226 -0.411,-0.387 -0.636,-0.403c-0.001,0 -0.003,0 -0.004,0c-0.147,0 -0.366,0.041 -0.739,0.23l-7.371,3.747l3.092,6.08l0.939,-0.478l-0.86,-1.692l6.51,-3.311l0.86,1.692l0.94,-0.479l-0.707,-1.392c-0.198,-0.389 -0.329,-0.432 -0.33,-0.433zm-7.894,2.702l-0.988,-1.944l6.51,-3.311l0.988,1.943l-6.51,3.312z"/>
          <polygon fill="#39509C" points="152.24298095703125,35.60334777832031 144.24700927734375,39.67835998535156 144.6729736328125,40.52436828613281 148.2569580078125,38.70039367675781 150.91598510742188,43.92835998535156 151.74899291992188,43.50636291503906 149.0899658203125,38.27839660644531 152.67495727539062,36.45539855957031 "/>

          <path (click)="pressStart()" fill="url(#start_select_gradient_borders)" d="m20.873,55.74736c-5.846,0 -11.477,-3.215 -14.293,-8.788c-3.985,-7.888 -0.822,-17.512 7.065,-21.496l37.836,-19.117c7.886,-3.986 17.511,-0.822 21.496,7.064c3.985,7.888 0.822,17.512 -7.065,21.496l-37.836,19.117c-2.313,1.169 -4.777,1.724 -7.203,1.724l0,0z"/>
          <path (click)="pressSelect()"  fill="#939598" d="m66.73,16.56836c-1.54,-3.05 -4.621,-4.944 -8.039,-4.944c-1.417,0 -2.78,0.326 -4.052,0.969l-37.837,19.117c-2.146,1.084 -3.74,2.939 -4.491,5.223c-0.751,2.284 -0.567,4.724 0.517,6.868c1.54,3.05 4.62,4.944 8.039,4.944c1.397,0 2.798,-0.335 4.053,-0.969l37.837,-19.117c2.146,-1.084 3.74,-2.939 4.491,-5.223c0.75,-2.284 0.566,-4.723 -0.518,-6.868z"/>

          <path (click)="pressStart()" fill="url(#start_select_gradient_borders)" d="m98.873,55.74736c-5.846,0 -11.477,-3.215 -14.293,-8.788c-3.985,-7.888 -0.822,-17.512 7.065,-21.496l37.837,-19.117c7.886,-3.986 17.51,-0.822 21.496,7.064c3.984,7.888 0.821,17.512 -7.066,21.496l-37.836,19.117c-2.313,1.169 -4.778,1.724 -7.203,1.724l0,0z"/>
          <path (click)="pressStart()" fill="#939598" d="m144.729,16.56836c-1.54,-3.05 -4.62,-4.944 -8.039,-4.944c-1.417,0 -2.78,0.326 -4.053,0.969l-37.836,19.117c-2.146,1.084 -3.74,2.939 -4.491,5.223c-0.751,2.284 -0.567,4.724 0.517,6.868c1.54,3.05 4.62,4.944 8.039,4.944c1.397,0 2.798,-0.335 4.053,-0.969l37.837,-19.117c2.146,-1.084 3.74,-2.939 4.49,-5.223c0.752,-2.284 0.568,-4.723 -0.517,-6.868z"/>
        </g>
      </svg>
    </div>

    <div class="col col-lg-2">
      <svg width="165" height="137">
        <defs>
          <linearGradient id="a_b_gradient_background" x1="40%" y1="20%" x2="60%" y2="80%">
            <stop offset="0" stop-color="#C9C9C9"/>
            <stop offset="1" stop-color="#E0E0E0"/>
          </linearGradient>
          <linearGradient id="a_b_gradient_button_border" x1="30%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#C97A9B"/>
            <stop offset="1" stop-color="#9B2063"/>
          </linearGradient>
          <linearGradient id="a_b_gradient_button" x1="30%" y1="5%" x2="70%" y2="95%">
            <stop offset="0" stop-color="#BD5582"/>
            <stop offset="57%" stop-color="#A7356D"/>
            <stop offset="1" stop-color="#9B2063"/>
          </linearGradient>
        </defs>
        <g>
          <path fill="#39509C" d="m72.107,127.11436c-0.001,0.005 -0.007,0.002 -0.012,-0.002l-0.33,-0.174l-0.437,-0.166l0.2,-0.816c-0.003,-0.026 -0.008,-0.055 -0.017,-0.086l-0.017,-0.159l-1.23,-2.515c-0.207,-0.254 -0.472,-0.422 -0.758,-0.431l-0.001,0c-0.183,0 -0.485,0.054 -1.007,0.308l-9.339,4.535l3.984,8.204l9.338,-4.536c0.543,-0.264 0.77,-0.473 0.864,-0.602c0.172,-0.23 0.203,-0.542 0.098,-0.955l-1.336,-2.605zm-10.862,1.219l7.925,-3.849l0.947,1.95l-7.925,3.849l-0.947,-1.95zm2.619,5.393l-0.942,-1.942l7.925,-3.849l0.942,1.942l-7.925,3.849z"/>
          <path fill="#39509C" d="m147.21,86.75036c-0.697,-0.814 -1.46,-1.042 -2.398,-0.722l-0.136,0.085l-7.266,3.528c-1.08,0.524 -1.39,1.199 -1.001,2.188l3.303,6.798l1.335,-0.649l-0.793,-1.631l8.049,-3.908l0.792,1.632l1.353,-0.657l-3.238,-6.664zm-7.896,7.662l-1.293,-2.663l8.048,-3.909l1.293,2.663l-8.048,3.909z"/>
          <path fill="url(#a_b_gradient_background)" d="m41.769,121.63236c-15.047,-0.23 -29.389,-8.81 -36.271,-23.327c-9.651,-20.362 -0.969,-44.692 19.391,-54.345l80.808,-38.305c20.359,-9.655 44.69,-0.973 54.343,19.39c9.653,20.361 0.972,44.691 -19.39,54.344l-80.807,38.306c-5.843,2.77 -12.017,4.029 -18.074,3.937l0,0z"/>

          <path (click)="pressB()" fill="url(#a_b_gradient_button_border)" d="m43.667,52.15036c-15.623,0 -28.333,12.71 -28.333,28.333s12.71,28.333 28.333,28.333s28.333,-12.71 28.333,-28.333s-12.71,-28.333 -28.333,-28.333z"/>
          <circle (click)="pressB()" fill="url(#a_b_gradient_button)" cx="43.667" cy="80.483361" r="25.966"/>

          <path (click)="pressA()" fill="url(#a_b_gradient_button_border)" d="m121.001,16.15036c-15.623,0 -28.333,12.71 -28.333,28.333s12.71,28.333 28.333,28.333s28.333,-12.71 28.333,-28.333s-12.71,-28.333 -28.333,-28.333z"/>
          <circle (click)="pressA()" fill="url(#a_b_gradient_button)" cx="121.001" cy="44.483361" r="25.966"/>
        </g>
      </svg>
    </div>
  </div>
</div>

<div class="container mb-3">
  <ul class="list-group">
    <li *ngFor="let message of clientMessages" class="list-group-item">
      <div class="row">
        <div class="col">
          <span class="badge badge-primary badge-pill">{{message.user}}</span>
          {{message.body}}
        </div>
      </div>
      <div class="row">
        <div class="col text-muted">
          <small>{{formatDate(message.date)}}</small>
        </div>
      </div>
    </li>
  </ul>
</div>
